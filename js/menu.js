jQuery(function(){var SUB_PANEL_BCG_IMAGE_WIDTH=700;var current=-1;var loaded=0;var rootCount=jQuery('#flashes > li').length;var menu_flashes_classes="";var menu_flashes_bcgMoveUnit=0;jQuery('#flashes > li').last().addClass('last');jQuery('#flashes > li').each(function(ind){jQuery(this).addClass('bg1');menu_flashes_classes+=(" bg"+String(ind+1)+" ");if(jQuery(this).children('ul')[0]){jQuery(this).children('ul').addClass('subMenu sub'+String(ind+1));}else jQuery(this).append(jQuery('<ul></ul>').addClass('sub'+String(ind+1)).hide());jQuery(this).children('a').first().attr('id','bg'+String(ind+1));});var MenuWidth=mnuFlshesWidth-rootCount;var ItemWidth=Math.floor((MenuWidth-(rootCount-1))/rootCount);menu_flashes_bcgMoveUnit=Math.ceil((MenuWidth-(rootCount-1))/rootCount);jQuery("#topmenu_pad, #flashes.menu").css({width:(String(MenuWidth)+'px')});jQuery("#flashes.menu > li, #flashes.menu > li > a").css({width:(String(ItemWidth)+'px')});jQuery("#flashes.menu > li > ul").css({width:(String(ItemWidth)+'px')});jQuery("#flashes.menu > li > ul > li").addClass('secondLevel').each(function(ind){jQuery(this).attr('title',"");jQuery(this).find('ul').addClass('balloonedLevel');if(jQuery(this).find('ul')[0]){jQuery(this).balloon({position:"right",contents:jQuery(jQuery(this).find('ul').first()),offsetX:-Math.floor(ItemWidth/4),onDuration:200,offDuration:50,css:{minWidth:"20px",padding:"5px",borderRadius:"6px",border:"solid 1px #777",boxShadow:"none",color:mnuFlshesSubItemsColor,backgroundColor:mnuFlshesRootItemsBackground,opacity:"0.85",zIndex:"32767",textAlign:"left"}});}});;var MaxSubItems=0;jQuery("#flashes.menu > li").each(function(ind){if(jQuery(this).find('.secondLevel').length>MaxSubItems)MaxSubItems=jQuery(this).find('.secondLevel').length;});var secondLevelHeight=parseInt(jQuery("#flashes.menu > li > ul > li > a").first().css('line-height'))*MaxSubItems+10;jQuery('#flashes.menu > li > ul').css({'height':String(secondLevelHeight)+'px','marginTop':('-'+String(secondLevelHeight+mnuFlshesRootItemsHieght+20)+'px')});for(var i=1;i<=rootCount;++i)jQuery('<img />').load(function(){++loaded;if(loaded==jQuery('#flashes > li > a').length){jQuery('#flashes > li > a').mouseover(function(e){var ind=jQuery(this).parent().index();if(ind==current)return;var item=jQuery(this).attr('id');if(ind<current){if(jQuery('#flashes .sub'+parseInt(current+1))[0])jQuery('#flashes .sub'+parseInt(current+1)).stop().animate({backgroundPosition:"(-"+String(SUB_PANEL_BCG_IMAGE_WIDTH)+"px 0)"},300,function(){jQuery(this).find('li').hide();});}else{if(jQuery('#flashes .sub'+parseInt(current+1))[0])jQuery('#flashes .sub'+parseInt(current+1)).stop().animate({backgroundPosition:"("+String(SUB_PANEL_BCG_IMAGE_WIDTH)+"px 0)"},300,function(){jQuery(this).find('li').hide();});}if(ind<current){jQuery('#flashes > li').animate({backgroundPosition:("(-"+mnuFlshesWidth+"px 0)")},0).removeClass(menu_flashes_classes).addClass(item);move(1,item);}else{jQuery('#flashes > li').animate({backgroundPosition:("("+mnuFlshesWidth+"px 0)")},0).removeClass(menu_flashes_classes).addClass(item);move(0,item);}var j=0;var delay=0;if(current-ind>1){for(j=(current-1);j>ind;j--){if(jQuery('#flashes .sub'+String(j+1))[0])jQuery('#flashes .sub'+String(j+1)).stop().delay(delay).animate({backgroundPosition:"(-"+String(SUB_PANEL_BCG_IMAGE_WIDTH)+"px 0)"},300);delay+=150;}}else if(ind-current>1){for(j=(current+1);j<ind;j++){if(jQuery('#flashes .sub'+String(j+1))[0])jQuery('#flashes .sub'+String(j+1)).stop().delay(delay).animate({backgroundPosition:"("+String(SUB_PANEL_BCG_IMAGE_WIDTH)+"px 0)"},300);delay+=150;}}current=ind;if(jQuery('#flashes .sub'+parseInt(current+1))[0])jQuery('#flashes .sub'+parseInt(current+1)).stop().delay(delay).animate({backgroundPosition:"(0 0)"},300,function(){jQuery('.secondLevel').hide();jQuery(this).find('li').fadeIn();});});}}).attr('src',siteBaseLink+'templates/hot_flashes/images/menu/bg'+String(i)+'.jpg');var MoveTo=1;if(jQuery("#flashes.menu > li.active")[0]){current=jQuery("#flashes.menu > li.active").index();MoveTo=current+1;}jQuery("#flashes.menu > li").each(function(ind){if(ind+1!=MoveTo){jQuery(this).find('.subMenu').css('backgroundPosition','-2000px 0px');jQuery(this).find('.subMenu').find('.secondLevel').hide();}});jQuery('#flashes > li').removeClass(menu_flashes_classes).addClass('bg'+String(MoveTo));move(1,'bg'+String(MoveTo));function move(dir,item,speed){if(!speed)speed=100;if(dir){jQuery('#flashes > li').each(function(ind){var n=ind+1;jQuery(this).stop().animate({backgroundPosition:"(-"+String(ind*menu_flashes_bcgMoveUnit)+"px 0)"},((n+1)*speed),(n!=rootCount)?null:function(){jQuery('#topmenu_pad').removeClass(menu_flashes_classes).addClass(item);});});}else{jQuery('#flashes > li').each(function(ind){var n=ind+1;jQuery(this).stop().animate({backgroundPosition:"(-"+String(ind*menu_flashes_bcgMoveUnit)+"px 0)"},((rootCount+1-ind)*speed),(n!=1)?null:function(){jQuery('#topmenu_pad').removeClass(menu_flashes_classes).addClass(item);});});}}});